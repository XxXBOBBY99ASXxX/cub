{"version":3,"file":"CZ177u3GNS87Q_oqsjHX.js","sources":["../../src/contexts/ContextMenuContext.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { FloatingPortal, useFloating } from \"@floating-ui/react\";\nimport React from \"react\";\nimport useContextMenu, { ContextMenuComponents } from \"../hooks/useContextMenu\";\nimport Channel from \"../stores/objects/Channel\";\nimport Guild from \"../stores/objects/Guild\";\nimport GuildMember from \"../stores/objects/GuildMember\";\nimport { MessageLike } from \"../stores/objects/Message\";\nimport User from \"../stores/objects/User\";\n\nexport type ContextMenuProps =\n\t| {\n\t\t\ttype: \"user\";\n\t\t\tuser: User;\n\t\t\tmember?: GuildMember;\n\t  }\n\t| {\n\t\t\ttype: \"message\";\n\t\t\tmessage: MessageLike;\n\t  }\n\t| {\n\t\t\ttype: \"channel\";\n\t\t\tchannel: Channel;\n\t  }\n\t| {\n\t\t\ttype: \"channelMention\";\n\t\t\tchannel: Channel;\n\t  }\n\t| {\n\t\t\ttype: \"guild\";\n\t\t\tguild: Guild;\n\t  };\n\nexport type ContextMenuContextType = {\n\tsetReferenceElement: ReturnType<typeof useFloating>[\"refs\"][\"setReference\"];\n\tonContextMenu: (e: React.MouseEvent, props: ContextMenuProps) => void;\n\tclose: () => void;\n\topen: (props: ContextMenuProps) => void;\n};\n\n// @ts-expect-error not specifying a default value here\nexport const ContextMenuContext = React.createContext<ContextMenuContextType>();\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ContextMenuContextProvider: React.FC<any> = ({ children }) => {\n\tconst contextMenu = useContextMenu();\n\n\tconst open = (props: ContextMenuProps) => {\n\t\tcontextMenu.open(props);\n\t};\n\n\tconst Component = contextMenu.props\n\t\t? ContextMenuComponents[contextMenu.props.type]\n\t\t: () => {\n\t\t\t\treturn null;\n\t\t\t};\n\n\treturn (\n\t\t<ContextMenuContext.Provider\n\t\t\tvalue={{\n\t\t\t\tclose: contextMenu.close,\n\t\t\t\topen,\n\t\t\t\tsetReferenceElement: contextMenu.refs.setReference,\n\t\t\t\tonContextMenu: contextMenu.onContextMenu,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<FloatingPortal>\n\t\t\t\t{contextMenu.isOpen && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"ContextMenu\"\n\t\t\t\t\t\tref={contextMenu.refs.setFloating}\n\t\t\t\t\t\tstyle={contextMenu.floatingStyles}\n\t\t\t\t\t\t{...contextMenu.getFloatingProps()}\n\t\t\t\t\t\tonClick={() => [contextMenu.close()]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Component {...contextMenu.props} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</FloatingPortal>\n\t\t</ContextMenuContext.Provider>\n\t);\n};\n"],"names":["ContextMenuContext","React","ContextMenuContextProvider","children","contextMenu","useContextMenu","open","props","Component","ContextMenuComponents","jsxs","jsx","FloatingPortal"],"mappings":"iHAyCa,MAAAA,EAAqBC,EAAM,cAAsC,EAGjEC,EAA4C,CAAC,CAAE,SAAAC,KAAe,CAC1E,MAAMC,EAAcC,IAEdC,EAAQC,GAA4B,CACzCH,EAAY,KAAKG,CAAK,CAAA,EAGjBC,EAAYJ,EAAY,MAC3BK,EAAsBL,EAAY,MAAM,IAAI,EAC5C,IACO,KAIT,OAAAM,EAAA,KAACV,EAAmB,SAAnB,CACA,MAAO,CACN,MAAOI,EAAY,MACnB,KAAAE,EACA,oBAAqBF,EAAY,KAAK,aACtC,cAAeA,EAAY,aAC5B,EAEC,SAAA,CAAAD,EACDQ,EAAAA,IAACC,EACC,CAAA,SAAAR,EAAY,QACZO,EAAA,IAAC,MAAA,CACA,UAAU,cACV,IAAKP,EAAY,KAAK,YACtB,MAAOA,EAAY,eAClB,GAAGA,EAAY,iBAAiB,EACjC,QAAS,IAAM,CAACA,EAAY,OAAO,EAEnC,SAACO,EAAA,IAAAH,EAAA,CAAW,GAAGJ,EAAY,KAAO,CAAA,CAAA,CAAA,EAGrC,CAAA,CAAA,CAAA,CAGH"}