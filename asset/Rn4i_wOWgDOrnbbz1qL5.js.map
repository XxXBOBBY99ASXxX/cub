{"version":3,"file":"Rn4i_wOWgDOrnbbz1qL5.js","sources":["../../src/components/messaging/Chat.tsx"],"sourcesContent":["import { runInAction } from \"mobx\";\nimport { observer } from \"mobx-react-lite\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport useLogger from \"../../hooks/useLogger\";\nimport { useAppStore } from \"../../stores/AppStore\";\nimport Channel from \"../../stores/objects/Channel\";\nimport Guild from \"../../stores/objects/Guild\";\nimport MemberList from \"../MemberList/MemberList\";\nimport ChatHeader from \"./ChatHeader\";\nimport MessageInput from \"./MessageInput\";\nimport MessageList from \"./MessageList\";\nimport TypingIndicator from \"./TypingIndicator\";\n\n/**\n * Wrapps chat and member list into a row\n */\nconst WrapperOne = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex: 1 1 auto;\n\toverflow: hidden;\n`;\n\n/**\n * Wraps the message list, header, and input into a column\n */\nconst WrapperTwo = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: var(--background-primary-alt);\n\tflex: 1 1 auto;\n\toverflow: hidden;\n`;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 auto;\n\tposition: relative;\n\toverflow: hidden;\n`;\n\ninterface Props {\n\tchannel?: Channel;\n\tguild?: Guild;\n\tchannelId?: string;\n\tguildId?: string;\n}\n\ninterface Props2 {\n\tchannel: Channel;\n\tguild: Guild;\n}\n\nfunction ChatContent({ channel, guild }: Props2) {\n\treturn (\n\t\t<Container>\n\t\t\t<MessageList guild={guild} channel={channel} />\n\t\t\t<MessageInput channel={channel} guild={guild} />\n\t\t\t<TypingIndicator channel={channel} />\n\t\t</Container>\n\t);\n}\n\nconst Content = observer((props: Props2) => {\n\tconst { memberListVisible } = useAppStore();\n\n\treturn (\n\t\t<WrapperOne>\n\t\t\t<ChatContent {...props} />\n\t\t\t{memberListVisible && <MemberList />}\n\t\t</WrapperOne>\n\t);\n});\n\n/**\n * Main component for rendering channel messages\n */\nfunction Chat() {\n\tconst app = useAppStore();\n\tconst logger = useLogger(\"Messages\");\n\tconst { activeChannel, activeGuild, activeChannelId, activeGuildId } = app;\n\n\tReact.useEffect(() => {\n\t\tif (!activeChannel || !activeGuild || activeChannelId === \"@me\") return;\n\n\t\trunInAction(() => {\n\t\t\tapp.gateway.onChannelOpen(activeGuildId!, activeChannelId!);\n\t\t});\n\t}, [activeChannel, activeGuild]);\n\n\tif (activeGuildId && activeGuildId === \"@me\") {\n\t\treturn (\n\t\t\t<WrapperTwo>\n\t\t\t\t<span\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpadding: \"1rem\",\n\t\t\t\t\t\tuserSelect: \"none\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tHome Section Placeholder\n\t\t\t\t</span>\n\t\t\t</WrapperTwo>\n\t\t);\n\t}\n\n\tif (!activeGuild || !activeChannel) {\n\t\treturn (\n\t\t\t<WrapperTwo>\n\t\t\t\t<span\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor: \"var(--text-secondary)\",\n\t\t\t\t\t\tfontSize: \"1.5rem\",\n\t\t\t\t\t\tmargin: \"auto\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tUnknown Guild or Channel\n\t\t\t\t</span>\n\t\t\t</WrapperTwo>\n\t\t);\n\t}\n\n\tif (!activeChannel.hasPermission(\"VIEW_CHANNEL\")) {\n\t\treturn (\n\t\t\t<WrapperTwo>\n\t\t\t\t<span\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor: \"var(--text-secondary)\",\n\t\t\t\t\t\tfontSize: \"1.5rem\",\n\t\t\t\t\t\tmargin: \"auto\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tYou do not have permission to view this channel\n\t\t\t\t</span>\n\t\t\t</WrapperTwo>\n\t\t);\n\t}\n\n\treturn (\n\t\t<WrapperTwo>\n\t\t\t<ChatHeader channel={activeChannel} />\n\t\t\t<Content channel={activeChannel} guild={activeGuild} />\n\t\t</WrapperTwo>\n\t);\n}\n\nexport default observer(Chat);\n"],"names":["WrapperOne","styled","WrapperTwo","Container","ChatContent","channel","guild","jsx","MessageList","MessageInput","TypingIndicator","Content","observer","props","memberListVisible","useAppStore","MemberList","Chat","app","activeChannel","activeGuild","activeChannelId","activeGuildId","React","runInAction","ChatHeader","Chat$1"],"mappings":"8VAiBA,MAAMA,EAAaC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAUpBC,EAAaD,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQpBE,EAAYF,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBzB,SAASG,EAAY,CAAE,QAAAC,EAAS,MAAAC,GAAiB,CAChD,cACEH,EACA,CAAA,SAAA,CAACI,EAAAA,IAAAC,EAAA,CAAY,MAAAF,EAAc,QAAAD,CAAkB,CAAA,EAC7CE,EAAAA,IAACE,EAAa,CAAA,QAAAJ,EAAkB,MAAAC,CAAc,CAAA,EAC9CC,MAACG,GAAgB,QAAAL,EAAkB,CACpC,CAAA,CAAA,CAEF,CAEA,MAAMM,EAAUC,EAAUC,GAAkB,CACrC,KAAA,CAAE,kBAAAC,GAAsBC,IAE9B,cACEf,EACA,CAAA,SAAA,CAACO,EAAAA,IAAAH,EAAA,CAAa,GAAGS,EAAO,EACvBC,SAAsBE,EAAW,EAAA,CACnC,CAAA,CAAA,CAEF,CAAC,EAKD,SAASC,GAAO,CACf,MAAMC,EAAMH,IAEN,CAAE,cAAAI,EAAe,YAAAC,EAAa,gBAAAC,EAAiB,cAAAC,GAAkBJ,EAUnE,OARJK,EAAM,UAAU,IAAM,CACjB,CAACJ,GAAiB,CAACC,GAAeC,IAAoB,OAE1DG,EAAY,IAAM,CACbN,EAAA,QAAQ,cAAcI,EAAgBD,CAAgB,CAAA,CAC1D,CAAA,EACC,CAACF,EAAeC,CAAW,CAAC,EAE3BE,GAAiBA,IAAkB,YAEpCpB,EACA,CAAA,SAAAK,EAAA,IAAC,OAAA,CACA,MAAO,CACN,QAAS,OACT,WAAY,MACb,EACA,SAAA,0BAAA,CAGF,CAAA,CAAA,EAIE,CAACa,GAAe,CAACD,QAElBjB,EACA,CAAA,SAAAK,EAAA,IAAC,OAAA,CACA,MAAO,CACN,MAAO,wBACP,SAAU,SACV,OAAQ,MACT,EACA,SAAA,0BAAA,CAGF,CAAA,CAAA,EAIGY,EAAc,cAAc,cAAc,SAiB7CjB,EACA,CAAA,SAAA,CAACK,EAAAA,IAAAkB,EAAA,CAAW,QAASN,CAAe,CAAA,EACnCZ,EAAA,IAAAI,EAAA,CAAQ,QAASQ,EAAe,MAAOC,EAAa,CACtD,CAAA,CAAA,QAlBElB,EACA,CAAA,SAAAK,EAAA,IAAC,OAAA,CACA,MAAO,CACN,MAAO,wBACP,SAAU,SACV,OAAQ,MACT,EACA,SAAA,iDAAA,CAGF,CAAA,CAAA,CAUH,CAEA,MAAemB,EAAAd,EAASK,CAAI"}