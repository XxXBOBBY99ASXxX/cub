{"version":3,"file":"CAENNYHyDGwiXac_Jodl.js","sources":["../../src/components/messaging/MessageAuthor.tsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\";\nimport React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { ContextMenuContext } from \"../../contexts/ContextMenuContext\";\nimport useLogger from \"../../hooks/useLogger\";\nimport { useAppStore } from \"../../stores/AppStore\";\nimport Guild from \"../../stores/objects/Guild\";\nimport GuildMember from \"../../stores/objects/GuildMember\";\nimport { MessageLike } from \"../../stores/objects/Message\";\nimport Floating from \"../floating/Floating\";\nimport FloatingTrigger from \"../floating/FloatingTrigger\";\n\nconst Container = styled.div`\n\tfont-size: 16px;\n\tfont-weight: var(--font-weight-medium);\n\tuser-select: none;\n\n\t&:hover {\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n`;\n\ninterface Props {\n\tmessage: MessageLike;\n\tguild?: Guild;\n}\n\nfunction MessageAuthor({ message, guild }: Props) {\n\tconst app = useAppStore();\n\tconst logger = useLogger(\"MessageAuthor\");\n\tconst contextMenu = useContext(ContextMenuContext);\n\tconst [color, setColor] = React.useState<string | undefined>(undefined);\n\tconst [eventData, setEventData] = React.useState<React.MouseEvent<HTMLDivElement, MouseEvent> | undefined>();\n\tconst [member, setMember] = React.useState<GuildMember | undefined>(undefined);\n\tconst { members } = guild || {};\n\n\tReact.useEffect(() => {\n\t\tif (!eventData) return;\n\t\tcontextMenu.onContextMenu(eventData, { type: \"user\", user: message.author, member });\n\t}, [eventData, member]);\n\n\tconst onContextMenu = async (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tsetEventData(e);\n\t\tapp.guilds.get(message.guild_id!)?.members.resolve(message.author.id).then(setMember);\n\t};\n\n\tReact.useEffect(() => {\n\t\tif (!members) return;\n\n\t\tconst member = members.get(message.author.id);\n\t\tif (!member) return;\n\t\tsetColor(member.roleColor);\n\t}, [message, members]);\n\n\treturn (\n\t\t<Floating\n\t\t\tplacement=\"right-start\"\n\t\t\ttype=\"userPopout\"\n\t\t\tprops={{\n\t\t\t\tuser: message.author,\n\t\t\t}}\n\t\t>\n\t\t\t<FloatingTrigger>\n\t\t\t\t<Container\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor,\n\t\t\t\t\t}}\n\t\t\t\t\tref={contextMenu.setReferenceElement}\n\t\t\t\t\tonContextMenu={onContextMenu}\n\t\t\t\t>\n\t\t\t\t\t{message.author.username}\n\t\t\t\t</Container>\n\t\t\t</FloatingTrigger>\n\t\t</Floating>\n\t);\n}\n\nexport default observer(MessageAuthor);\n"],"names":["Container","styled","MessageAuthor","message","guild","app","useAppStore","contextMenu","useContext","ContextMenuContext","color","setColor","React","eventData","setEventData","member","setMember","members","onContextMenu","_a","jsx","Floating","FloatingTrigger","MessageAuthor$1","observer"],"mappings":"kQAYA,MAAMA,EAAYC,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBzB,SAASC,EAAc,CAAE,QAAAC,EAAS,MAAAC,GAAgB,CACjD,MAAMC,EAAMC,IAENC,EAAcC,aAAWC,CAAkB,EAC3C,CAACC,EAAOC,CAAQ,EAAIC,EAAM,SAA6B,MAAS,EAChE,CAACC,EAAWC,CAAY,EAAIF,EAAM,SAAmE,EACrG,CAACG,EAAQC,CAAS,EAAIJ,EAAM,SAAkC,MAAS,EACvE,CAAE,QAAAK,CAAA,EAAYb,GAAS,GAE7BQ,EAAM,UAAU,IAAM,CAChBC,GACON,EAAA,cAAcM,EAAW,CAAE,KAAM,OAAQ,KAAMV,EAAQ,OAAQ,OAAAY,CAAA,CAAQ,CAAA,EACjF,CAACF,EAAWE,CAAM,CAAC,EAEhB,MAAAG,EAAgB,MAAO,GAAoD,OAChF,EAAE,eAAe,EACjB,EAAE,gBAAgB,EAElBJ,EAAa,CAAC,GACdK,EAAAd,EAAI,OAAO,IAAIF,EAAQ,QAAS,IAAhC,MAAAgB,EAAmC,QAAQ,QAAQhB,EAAQ,OAAO,IAAI,KAAKa,EAAS,EAGrF,OAAAJ,EAAM,UAAU,IAAM,CACrB,GAAI,CAACK,EAAS,OAEd,MAAMF,EAASE,EAAQ,IAAId,EAAQ,OAAO,EAAE,EACvCY,GACLJ,EAASI,EAAO,SAAS,CAAA,EACvB,CAACZ,EAASc,CAAO,CAAC,EAGpBG,EAAA,IAACC,EAAA,CACA,UAAU,cACV,KAAK,aACL,MAAO,CACN,KAAMlB,EAAQ,MACf,EAEA,eAACmB,EACA,CAAA,SAAAF,EAAA,IAACpB,EAAA,CACA,MAAO,CACN,MAAAU,CACD,EACA,IAAKH,EAAY,oBACjB,cAAAW,EAEC,WAAQ,OAAO,QAAA,CAAA,EAElB,CAAA,CAAA,CAGH,CAEA,MAAeK,EAAAC,EAAStB,CAAa"}