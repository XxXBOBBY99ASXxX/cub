import{o as y,u as b,a as w,R as i,r as A,j as e,F as S,b as L,c as t,g as P,d as G,p as R,e as k,v as E,l as v}from"./DEYDuN7xp-m3cL830AkD.js";import{A as s}from"./44bTYnJQVHCnDfSNCg2x.js";import{L as N}from"./CfzDdbGMIcXdr0MbBRaF.js";import{N as V}from"./AejxlPTAbTHGOPetKbIg.js";import{R as C}from"./D0MaA8wZ98ogTADgz3U0.js";import{E as F}from"./4Ymu5ejHo0cPvCm4neqp.js";import{L as T}from"./Cr4GFsmTJMXuO1_uSYGo.js";import{U as p}from"./CT2HDzmxJjerVA5a979r.js";import{u as I}from"./DMCex30FeWvvThtDj-pY.js";import{A as l}from"./D0t0tI7QX43dOCJzZec4.js";import{L as O}from"./C1Xxslr_piFNHE9WysEE.js";import{C as U}from"./DMUGHnd-pWqM9yRL1cLU.js";import{u as W}from"./zdDLXtJuoQIQMZlDPq5d.js";import{G as m}from"./p92OKrTFGeG4VzMCmQFU.js";import{b as c}from"./B2AOnhNI6Tluj3Wj8PkC.js";import"./C9W7uVu_BdaOoe7yHn9R.js";import{i as B}from"./DFxtuzOGt4j9P4wz18l_.js";function D(){const o=W(),n=I("App"),f=b(),r=w();return i.useEffect(()=>{const g=A(()=>o.token,a=>{a?(o.rest.setToken(a),o.gateway.readyState===WebSocket.CLOSED?(o.setGatewayReady(!1),o.gateway.connect(m.routeSettings.gateway)):n.debug("Gateway connect called but socket is not closed")):(n.debug("user no longer authenticated"),o.gateway.readyState===WebSocket.OPEN&&o.gateway.disconnect(1e3,"user is no longer authenticated"),f("/"))});return B&&(async()=>{const[a,u,d,h,x,j]=await Promise.all([P(),G(),R(),k(),E(),v()]);window.globals={tauriVersion:a,appVersion:u,platform:{name:d,arch:h,version:x,locale:j}}})(),m.load(),o.loadSettings(),n.debug("Loading complete"),o.setAppLoading(!1),g},[]),i.useEffect(()=>{r.online?c.remove("offline"):c.push({type:"offline"},"offline")},[r]),e.jsxs(F,{section:"app",children:[o.fpsShown&&e.jsx(S,{}),e.jsx(T,{children:e.jsxs(L,{children:[e.jsx(t,{index:!0,path:"/",element:e.jsx(s,{component:l})}),e.jsx(t,{path:"/app",element:e.jsx(s,{component:l})}),e.jsx(t,{path:"/channels/:guildId/:channelId?",element:e.jsx(s,{component:U})}),e.jsx(t,{path:"/login",element:e.jsx(p,{component:N})}),e.jsx(t,{path:"/register",element:e.jsx(p,{component:C})}),e.jsx(t,{path:"/logout",element:e.jsx(s,{component:O})}),e.jsx(t,{path:"*",element:e.jsx(V,{})})]})})]})}const re=y(D);export{re as A};
//# sourceMappingURL=DqCvrDFQFoZ93shN4J5y.js.map
